infrastructure:
  inventory:
    devices:
      - name: generic-host
        components:
          - name: npu
            count: 8
            npu:
          - name: cpu
            count: 2
            cpu:
          - name: nic
            count: 8
            nic:
          - name: nvswitch
            count: 1
            nvswitch:
        links:
          - name: nvlink
            type: LINK_NVLINK
            bandwidth:
              gbps: 400
          - name: pcie
            type: LINK_PCIE
            bandwidth:
              gbps: 200
        connections:
          - npu.*.nvlink.nvswitch.0
          - npu.0.pcie.nic.0
          - npu.1.pcie.nic.1
          - npu.2.pcie.nic.2
          - npu.3.pcie.nic.3
          - npu.4.pcie.nic.4
          - npu.5.pcie.nic.5
          - npu.6.pcie.nic.6
          - npu.7.pcie.nic.7

      - name: th3switch
        components:
          - name: asic
            count: 1
            custom:
          - name: nic
            count: 32
            nic:
          - name: pcie
            type: LINK_PCIE
            bandwidth:
              gbps: 200
        connections:
          - nic.*.pcie.asic.0
    links:
      - name: eth-100
        type: LINK_ETHERNET
        bandwidth:
          gpbs: 100
      - name: eth-400
        type: LINK_ETHERNET
        bandwidth:
          gpbs: 400
      - name: eth-800
        type: LINK_ETHERNET
        bandwidth:
          gpbs: 800

  device_instances:
    - name: host
      device: generic-host
      count: 256
    - name: rack-switch
      device: th3switch
      count: 8
    - name: pod_switch
      device: th3switch
      count: 4

  connections:
    - host.*.nic.*.ethernet.rack-switch.*.nic.*

  bindings:
